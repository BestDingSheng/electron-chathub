# ğŸ“¦ é¡¹ç›®å‘å¸ƒæŒ‡å—

è¿™ä»½æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†å¦‚ä½•ä½¿ç”¨è‡ªåŠ¨åŒ–å‘å¸ƒç³»ç»Ÿåˆ›å»º GitHub Releasesï¼ŒåŒ…æ‹¬æ„å»ºäº§ç‰©ä¸Šä¼ å’Œè‡ªåŠ¨ç”Ÿæˆ changelogã€‚

> âš ï¸ **é‡è¦æé†’**: åœ¨ä½¿ç”¨è‡ªåŠ¨åŒ–å‘å¸ƒå‰ï¼Œå¿…é¡»å®Œæˆ [GitHub Token é…ç½®](#github-token-é…ç½®å¿…éœ€æ­¥éª¤) æ­¥éª¤ï¼Œå¦åˆ™å‘å¸ƒæµç¨‹ä¼šå¤±è´¥ï¼

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æäº¤ä»£ç è§¦å‘å‘å¸ƒ

```bash
# æ·»åŠ ä¿®æ”¹
git add .

# ä½¿ç”¨è§„èŒƒçš„ commit message æäº¤
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½æè¿°"

# æ¨é€åˆ°ä¸»åˆ†æ”¯
git push origin main
```

### 2. æŸ¥çœ‹å‘å¸ƒç»“æœ

- ç­‰å¾… GitHub Actions å®Œæˆï¼ˆçº¦ 5-10 åˆ†é’Ÿï¼‰
- è®¿é—®é¡¹ç›®çš„ [Releases é¡µé¢](https://github.com/your-username/your-repo/releases)
- æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆçš„ Release å’Œ Assets

## ğŸ“ Commit Message è§„èŒƒ

ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

### å¸¸ç”¨ç±»å‹

| ç±»å‹ | è¯´æ˜ | ç‰ˆæœ¬å½±å“ |
|------|------|----------|
| `feat:` | æ–°åŠŸèƒ½ | æ¬¡ç‰ˆæœ¬å‡çº§ (0.1.0 â†’ 0.2.0) |
| `fix:` | ä¿®å¤bug | ä¿®è®¢å·å‡çº§ (0.1.0 â†’ 0.1.1) |
| `docs:` | æ–‡æ¡£æ›´æ–° | æ— ç‰ˆæœ¬å‡çº§ |
| `style:` | ä»£ç æ ¼å¼ | æ— ç‰ˆæœ¬å‡çº§ |
| `refactor:` | ä»£ç é‡æ„ | æ— ç‰ˆæœ¬å‡çº§ |
| `test:` | æµ‹è¯•ç›¸å…³ | æ— ç‰ˆæœ¬å‡çº§ |
| `chore:` | æ„å»º/å·¥å…· | æ— ç‰ˆæœ¬å‡çº§ |

### ç¤ºä¾‹

```bash
feat: æ·»åŠ æš—é»‘æ¨¡å¼æ”¯æŒ
fix: ä¿®å¤çª—å£å¤§å°è°ƒæ•´é—®é¢˜
docs: æ›´æ–° README å®‰è£…è¯´æ˜
style: ä¼˜åŒ–ä»£ç æ ¼å¼åŒ–
refactor: é‡æ„çŠ¶æ€ç®¡ç†é€»è¾‘
test: æ·»åŠ å•å…ƒæµ‹è¯•
chore: æ›´æ–°ä¾èµ–åŒ…ç‰ˆæœ¬
```

## ğŸ”§ æœ¬åœ°æµ‹è¯•å‘å¸ƒæµç¨‹

åœ¨ä¸å®é™…å‘å¸ƒçš„æƒ…å†µä¸‹æµ‹è¯•æ•´ä¸ªæµç¨‹ï¼š

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. æ„å»ºåº”ç”¨
npm run build

# 3. æ‰“åŒ… Electron åº”ç”¨
npm run dist

# 4. æ¨¡æ‹Ÿå‘å¸ƒæµç¨‹ï¼ˆä¸ä¼šçœŸæ­£å‘å¸ƒï¼‰
npm run release:dry-run
```

## ğŸ“ å‘å¸ƒäº§ç‰©è¯´æ˜

### æ„å»ºäº§ç‰©ä½ç½®
- **è¾“å‡ºç›®å½•**: `dist/`
- **åŒ…å«æ–‡ä»¶**: å„å¹³å°çš„å®‰è£…åŒ…

### æ”¯æŒçš„å®‰è£…åŒ…æ ¼å¼

| å¹³å° | æ–‡ä»¶æ ¼å¼ | è¯´æ˜ |
|------|----------|------|
| macOS | `.dmg` | ç£ç›˜æ˜ åƒæ–‡ä»¶ |
| Windows | `.exe` | NSIS å®‰è£…ç¨‹åº |
| Linux | `.AppImage` | ä¾¿æºåº”ç”¨æ ¼å¼ |
| Linux | `.deb` | Debian å®‰è£…åŒ… |

## ğŸ”‘ GitHub Token é…ç½®ï¼ˆå¿…éœ€æ­¥éª¤ï¼‰

åœ¨é¦–æ¬¡ä½¿ç”¨è‡ªåŠ¨åŒ–å‘å¸ƒå‰ï¼Œå¿…é¡»é…ç½® GitHub Tokenï¼Œå¦åˆ™å‘å¸ƒæµç¨‹ä¼šå¤±è´¥ã€‚

### 1. åˆ›å»º Personal Access Token

1. **è®¿é—® GitHub Settings**
   - ç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ Settings
   - æˆ–è€…ç›´æ¥è®¿é—®ï¼šhttps://github.com/settings/tokens

2. **åˆ›å»ºæ–° Token**
   - ç‚¹å‡» "Developer settings" â†’ "Personal access tokens" â†’ "Tokens (classic)"
   - ç‚¹å‡» "Generate new token" â†’ "Generate new token (classic)"

3. **é…ç½® Token ä¿¡æ¯**
   - **Note**: `AI-Service-Manager-Release`ï¼ˆæˆ–å…¶ä»–æè¿°æ€§åç§°ï¼‰
   - **Expiration**: å»ºè®®é€‰æ‹© "No expiration"ï¼ˆæˆ– 90 å¤©ï¼‰
   - **Select scopes**: å¿…é¡»å‹¾é€‰ä»¥ä¸‹æƒé™ï¼š
     - âœ… `repo` (Full control of private repositories)
     - âœ… `workflow` (Update GitHub Action workflows)
     - âœ… `write:packages` (Upload packages to GitHub Package Registry)

4. **ç”Ÿæˆå¹¶ä¿å­˜ Token**
   - ç‚¹å‡» "Generate token"
   - **âš ï¸ é‡è¦**: ç«‹å³å¤åˆ¶ç”Ÿæˆçš„ tokenï¼Œé¡µé¢å…³é—­åæ— æ³•å†æ¬¡æŸ¥çœ‹

### 2. é…ç½®ä»“åº“ Secrets

1. **è¿›å…¥ä»“åº“è®¾ç½®**
   - æ‰“å¼€ä½ çš„é¡¹ç›®ä»“åº“é¡µé¢
   - ç‚¹å‡» "Settings" â†’ "Secrets and variables" â†’ "Actions"

2. **æ·»åŠ  Token Secret**
   - ç‚¹å‡» "New repository secret"
   - **Name**: `RELEASE_TOKEN` ï¼ˆâš ï¸ æ³¨æ„ï¼šä¸èƒ½ä½¿ç”¨ `GITHUB_` å‰ç¼€ï¼‰
   - **Value**: ç²˜è´´åˆšæ‰å¤åˆ¶çš„ Personal Access Token
   - ç‚¹å‡» "Add secret"

3. **éªŒè¯é…ç½®**
   - ç¡®ä¿ secret åç§°æ­£ç¡®æ˜¾ç¤ºä¸º `RELEASE_TOKEN`
   - çŠ¶æ€åº”ä¸º "Added"

### 3. Token å®‰å…¨æ³¨æ„äº‹é¡¹

- **å¦¥å–„ä¿ç®¡**: ä¸è¦å°† Token åˆ†äº«ç»™ä»–äººæˆ–æäº¤åˆ°ä»£ç ä¸­
- **å®šæœŸæ›´æ–°**: å¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œè®°å¾—åœ¨åˆ°æœŸå‰æ›´æ–°
- **æƒé™æœ€å°åŒ–**: åªæˆäºˆå¿…è¦çš„æƒé™
- **ç›‘æ§ä½¿ç”¨**: å®šæœŸæ£€æŸ¥ Token çš„ä½¿ç”¨æƒ…å†µ

## âš™ï¸ è‡ªåŠ¨åŒ–é…ç½®è¯¦è§£

### GitHub Actions å·¥ä½œæµ (`.github/workflows/release.yml`)

- **è§¦å‘æ¡ä»¶**: æ¨é€åˆ° `main` åˆ†æ”¯
- **æ„å»ºç¯å¢ƒ**: Ubuntu, Windows, macOS
- **æƒé™è¦æ±‚**: éœ€è¦ `RELEASE_TOKEN` secret é…ç½®
- **ä¸»è¦æ­¥éª¤**:
  1. ä»£ç æ£€å‡º
  2. Node.js ç¯å¢ƒé…ç½®
  3. ä¾èµ–å®‰è£…
  4. åº”ç”¨æ„å»º
  5. Electron æ‰“åŒ…
  6. è¯­ä¹‰åŒ–å‘å¸ƒï¼ˆéœ€è¦ Token æƒé™ï¼‰

### è¯­ä¹‰åŒ–å‘å¸ƒé…ç½® (`.releaserc.json`)

- **ç‰ˆæœ¬ç­–ç•¥**: åŸºäº commit message è‡ªåŠ¨è®¡ç®—
- **Changelog**: è‡ªåŠ¨ç”Ÿæˆå¹¶æäº¤åˆ°ä»“åº“
- **GitHub Release**: è‡ªåŠ¨åˆ›å»ºå¹¶ä¸Šä¼ æ„å»ºäº§ç‰©

## ğŸ¯ æ‰‹åŠ¨å‘å¸ƒï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰

å¦‚æœè‡ªåŠ¨åŒ–å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»º Releaseï¼š

### 1. æœ¬åœ°æ„å»º
```bash
npm run build
npm run dist
```

### 2. åˆ›å»º Git æ ‡ç­¾
```bash
# åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
git tag v0.2.0

# æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹
git push origin v0.2.0
```

### 3. æ‰‹åŠ¨åˆ›å»º Release

1. è®¿é—® GitHub ä»“åº“çš„ [Releases](https://github.com/your-username/your-repo/releases) é¡µé¢
2. ç‚¹å‡» "Draft a new release"
3. é€‰æ‹©åˆšæ‰æ¨é€çš„æ ‡ç­¾
4. å¡«å†™ Release æ ‡é¢˜å’Œæè¿°
5. ä¸Šä¼  `dist/` ç›®å½•ä¸­çš„å®‰è£…åŒ…æ–‡ä»¶
6. ç‚¹å‡» "Publish release"

## ğŸ” å¸¸è§é—®é¢˜æ’æŸ¥

### æ„å»ºå¤±è´¥

1. **æ£€æŸ¥ Node.js ç‰ˆæœ¬**
   ```bash
   node --version  # å»ºè®®ä½¿ç”¨ v18+
   ```

2. **æ¸…ç†å¹¶é‡æ–°å®‰è£…ä¾èµ–**
   ```bash
   rm -rf node_modules package-lock.json
   npm install
   ```

3. **æ£€æŸ¥æ„å»ºæ—¥å¿—**
   - æŸ¥çœ‹ GitHub Actions çš„è¯¦ç»†æ—¥å¿—
   - æœ¬åœ°è¿è¡Œ `npm run build` æµ‹è¯•

### å‘å¸ƒå¤±è´¥

1. **æƒé™é—®é¢˜**
   - ç¡®ä¿ GitHub Token æœ‰å†™å…¥æƒé™
   - æ£€æŸ¥ä»“åº“çš„ Actions è®¾ç½®

2. **ç‰ˆæœ¬å†²çª**
   - æ‰‹åŠ¨åˆ é™¤å†²çªçš„ Git æ ‡ç­¾
   - é‡æ–°è§¦å‘å‘å¸ƒæµç¨‹

3. **æ–‡ä»¶ä¸Šä¼ å¤±è´¥**
   - æ£€æŸ¥æ„å»ºäº§ç‰©æ˜¯å¦å­˜åœ¨
   - éªŒè¯æ–‡ä»¶å¤§å°å’Œæ ¼å¼

## ğŸ“Š å‘å¸ƒæµç¨‹å›¾

```
ä»£ç æäº¤ â†’ GitHub Actions â†’ æ„å»ºåº”ç”¨ â†’ æ‰“åŒ…å®‰è£…åŒ… â†’ è¯­ä¹‰åŒ–å‘å¸ƒ â†’ GitHub Release
   â†“           â†“             â†“           â†“            â†“            â†“
commit msg   è§¦å‘å·¥ä½œæµ     next build  electron-   è®¡ç®—ç‰ˆæœ¬å·    ä¸Šä¼ Assets
è§„èŒƒæ£€æŸ¥     å¼€å§‹æ„å»º       æ„å»ºweb     builder     ç”Ÿæˆchangelog åˆ›å»ºrelease
```

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [Semantic Release æ–‡æ¡£](https://semantic-release.gitbook.io/)
- [Conventional Commits](https://www.conventionalcommits.org/)
- [Electron Builder æ–‡æ¡£](https://www.electron.build/)

## ğŸ’¡ æœ€ä½³å®è·µ

1. **ä¿æŒ commit message è§„èŒƒ**: è¿™æ˜¯è‡ªåŠ¨ç‰ˆæœ¬ç®¡ç†çš„åŸºç¡€
2. **ç»å¸¸æäº¤**: å°æ­¥å¿«è·‘ï¼Œé¿å…å¤§é‡ä»£ç å †ç§¯
3. **æµ‹è¯•æ„å»º**: æœ¬åœ°å…ˆæµ‹è¯•é€šè¿‡å†æ¨é€
4. **å…³æ³¨é€šçŸ¥**: GitHub Actions å¤±è´¥æ—¶ä¼šå‘é€é‚®ä»¶é€šçŸ¥
5. **å¤‡ä»½é‡è¦ç‰ˆæœ¬**: å…³é”®ç‰ˆæœ¬å¯ä»¥æ‰‹åŠ¨å¤‡ä»½æ„å»ºäº§ç‰©

---

**è®°ä½**: æ¯æ¬¡æ¨é€åˆ° `main` åˆ†æ”¯éƒ½ä¼šè§¦å‘è‡ªåŠ¨å‘å¸ƒæµç¨‹ï¼Œç¡®ä¿ä½ çš„ commit message ç¬¦åˆè§„èŒƒï¼